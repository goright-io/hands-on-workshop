import Layout from "../../templates/layout"

export default Layout
export const meta = { title: "Release and Deployment" }



## Building a library

When you feel your library is ready for production, you can build it:

```
yarn build:design-system
```

A minified production build of the library will be created in /dist folder. It is imported in your product's package.json folder.

## Building a product

Before you start develping a product, you need to make sure that tokens and design-system are build locally, since they are imported as product dependencies.
You can build product with the following:

```
yarn build:product
```

Or you can use a shortcut to build all 3 workspaces one by one:

```
yarn build
```

## Deployment

If you want to take advantage of github actions and continuosly deploy your product and storybook to github pages, you will need to set a few things:

- On free Github account only public repos can be deployed. Make sure your working repository is public, and the deployment branch is set to "gh-pages". It can be checked and fixed in repository settinds on Github.

- For product deployment, you need to edit "homepage" property in `./product/package.json`. It should be pointing to your repository.

Currently there are two deployment workflow, triggered on changes in _product workspace_ and on library release respectively.

## Releasing library

You need to run:

```
yarn release
```

This command will trigger the following actions:

1. `npm version` command will run in _design-system workspace_, you will be prompted to type new version number.
2. New git tag will be created and committed, and changes will be pushed to your remote repository.
3. On push to a remote a release workflow will be triggered: it will check if the version  of library has changed, and if yes - deploy a product.


